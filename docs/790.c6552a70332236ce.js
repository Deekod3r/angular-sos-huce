"use strict";(self.webpackChunkSOSHUCE_Angular=self.webpackChunkSOSHUCE_Angular||[]).push([[790],{5790:(G,m,i)=>{i.r(m),i.d(m,{RegisterComponent:()=>$});var o=i(95),p=i(5359),c=i(411),h=i(1423),f=i(6651),F=i(4716),C=i(6208),t=i(4946),v=i(7398),E=i(6306),Z=i(8504),A=i(553),T=i(9862);let U=(()=>{class e{constructor(n){this.http=n,this.API_URL=`${A.N.apiUrl}/students`}register(n){const{studentCode:u,password:r,faculty:g,name:d,email:H}=n.value;return this.http.post(`${this.API_URL}/register`,{studentCode:u,password:r,faculty:g.id,name:d,email:H}).pipe((0,v.U)(a=>{if(a.error)throw new Error(a.error);return a.data.id}),(0,E.K)(a=>(0,Z._)(()=>a)))}static#t=this.\u0275fac=function(u){return new(u||e)(t.LFG(T.eN))};static#e=this.\u0275prov=t.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),y=(()=>{class e{constructor(n){this.http=n,this.API_URL=`${A.N.apiUrl}`}getAllFaculty(){return this.http.get(`${this.API_URL}/faculties`).pipe((0,v.U)(n=>{if(n.error)throw new Error(n.error);return n.data}),(0,E.K)(n=>(0,Z._)(()=>n)))}static#t=this.\u0275fac=function(u){return new(u||e)(t.LFG(T.eN))};static#e=this.\u0275prov=t.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();var D=i(9502),I=i(9445),N=i(5219),q=i(6814),x=i(3714),R=i(707),J=i(7664);function M(e,s){1&e&&(t.TgZ(0,"div",22)(1,"span",23),t._uU(2,"\u0110\u0103ng k\xfd"),t.qZA()())}function S(e,s){1&e&&(t.TgZ(0,"div",24),t._uU(1," Vui l\xf2ng nh\u1eadp h\u1ecd t\xean "),t.qZA())}function k(e,s){1&e&&(t.TgZ(0,"div",24),t._uU(1," H\u1ecd t\xean kh\xf4ng h\u1ee3p l\u1ec7 "),t.qZA())}function Y(e,s){1&e&&(t.TgZ(0,"div",24),t._uU(1," Vui l\xf2ng nh\u1eadp m\xe3 s\u1ed1 sinh vi\xean "),t.qZA())}function b(e,s){1&e&&(t.TgZ(0,"div",24),t._uU(1," M\xe3 s\u1ed1 sinh vi\xean ph\u1ea3i l\xe0 s\u1ed1 "),t.qZA())}function L(e,s){1&e&&(t.TgZ(0,"div",24),t._uU(1," Vui l\xf2ng nh\u1eadp email "),t.qZA())}function _(e,s){1&e&&(t.TgZ(0,"div",24),t._uU(1," Email kh\xf4ng h\u1ee3p l\u1ec7 "),t.qZA())}function Q(e,s){1&e&&(t.TgZ(0,"h6"),t._uU(1,"Nh\u1eadp m\u1eadt kh\u1ea9u"),t.qZA())}function w(e,s){1&e&&(t._UZ(0,"p-divider"),t.TgZ(1,"p",25),t._uU(2,"Y\xeau c\u1ea7u"),t.qZA(),t.TgZ(3,"ul",26)(4,"li"),t._uU(5,"T\u1ed1i thi\u1ec3u 1 k\xfd t\u1ef1 ch\u1eef th\u01b0\u1eddng"),t.qZA(),t.TgZ(6,"li"),t._uU(7,"T\u1ed1i thi\u1ec3u 1 k\xfd t\u1ef1 ch\u1eef hoa"),t.qZA(),t.TgZ(8,"li"),t._uU(9,"T\u1ed1i thi\u1ec3u 1 k\xfd t\u1ef1 s\u1ed1"),t.qZA(),t.TgZ(10,"li"),t._uU(11,"\u0110\u1ed9 d\xe0i t\u1ed1i thi\u1ec3u 8 k\xfd t\u1ef1"),t.qZA()())}function O(e,s){1&e&&(t.TgZ(0,"div",24),t._uU(1," Vui l\xf2ng nh\u1eadp m\u1eadt kh\u1ea9u "),t.qZA())}function z(e,s){1&e&&(t.TgZ(0,"div",24),t._uU(1," M\u1eadt kh\u1ea9u kh\xf4ng h\u1ee3p l\u1ec7 "),t.qZA())}function P(e,s){1&e&&(t.TgZ(0,"div",24),t._uU(1," Vui l\xf2ng ch\u1ecdn khoa tr\u1ef1c thu\u1ed9c "),t.qZA())}const l=function(){return{width:"100%"}},V=function(){return{height:"3px"}};let $=(()=>{class e{constructor(n,u){this.studentService=n,this.facultyService=u,this.registerNotify=!1,this.registerMsg=[],this.isSubmitted=!1,this.faculties=[]}ngOnInit(){this.getFaculties(),this.registerForm=new o.cw({studentCode:new o.NI("",[o.kI.required,o.kI.pattern(/^\d+$/)]),password:new o.NI("",[o.kI.required,o.kI.pattern(/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[\W_])[A-Za-z\d\W_]{8,}$/)]),faculty:new o.NI(null,o.kI.required),name:new o.NI("",[o.kI.required,o.kI.pattern(/^[a-zA-Z\xc0\xc1\xc2\xc3\xc8\xc9\xca\xcc\xcd\xd2\xd3\xd4\xd5\xd9\xda\u0102\u0110\u0128\u0168\u01a0\xe0\xe1\xe2\xe3\xe8\xe9\xea\xec\xed\xf2\xf3\xf4\xf5\xf9\xfa\u0103\u0111\u0129\u0169\u01a1\u01af\u0102\u1ea0\u1ea2\u1ea4\u1ea6\u1ea8\u1eaa\u1eac\u1eae\u1eb0\u1eb2\u1eb4\u1eb6\u1eb8\u1eba\u1ebc\u1ec0\u1ec0\u1ec2\u01b0\u1ec2\u1ec4\u1ec6\u1ebe\u1ec8\u1eca\u1ecc\u1ece\u1ed0\u1ed2\u1ed4\u1ed6\u1ed8\u1eda\u1edc\u1ede\u1ee0\u1ee2\u1ee4\u1ee6\u1ee8\u1eea\u1ec5\u1ec7\u1ebf\u1ec9\u1ecb\u1ecd\u1ecf\u1ed1\u1ed3\u1ed5\u1ed7\u1ed9\u1edb\u1edd\u1edf\u1ee1\u1ee3\u1ee5\u1ee7\u1ee9\u1eeb\u1eed\u1eef\u1ef1\u1ef3\u1ef5\u1ef7\u1ef9 ]{2,}$/)]),email:new o.NI("",[o.kI.required,o.kI.pattern(/^[a-zA-Z]+\d+@(h|H)(u|U)(c|C)(e|E)\.(e|E)(d|D)(u|U)\.(v|V)(n|N)$/)])})}ngOnDestroy(){}getFaculties(){this.facultyService.getAllFaculty().subscribe({next:n=>{this.faculties=n},error:n=>{console.log(n)}})}onRegister(){this.registerForm.invalid?this.notify("Vui l\xf2ng nh\u1eadp \u0111\u1ea7y \u0111\u1ee7 th\xf4ng tin","error","L\u1ed7i"):(this.isSubmitted=!0,this.studentService.register(this.registerForm).pipe((0,F.x)(()=>{this.isSubmitted=!1})).subscribe({next:n=>{n&&(this.notify("Vui l\xf2ng ti\u1ebfp t\u1ee5c x\xe1c nh\u1eadn t\xe0i kho\u1ea3n","success","Th\xe0nh c\xf4ng"),this.registerForm.reset(),setTimeout(()=>{window.location.href="/auth/verify/"+n},2e3))},error:n=>{this.notify(409===n.status?"T\xe0i kho\u1ea3n sinh vi\xean \u0111\xe3 t\u1ed3n t\u1ea1i":"\u0110\u0103ng k\xfd th\u1ea5t b\u1ea1i, vui l\xf2ng th\u1eed l\u1ea1i sau","error","L\u1ed7i")}}))}notify(n,u,r){this.registerNotify=!0,this.registerMsg=[{severity:u,summary:r,detail:n}],setTimeout(()=>{this.registerNotify=!1,this.registerMsg=[]},5e3)}static#t=this.\u0275fac=function(u){return new(u||e)(t.Y36(U),t.Y36(y))};static#e=this.\u0275cmp=t.Xpm({type:e,selectors:[["app-register"]],standalone:!0,features:[t.jDz],decls:72,vars:29,consts:[[1,"form-center",3,"formGroup","ngSubmit"],[1,"xl:col-4","lg:col-6","md:col-6","col-12","panel"],["pTemplate","header"],[1,"grid"],[1,"col-12"],[1,"col-6","font-bold"],[1,"text-red-500"],["pInputText","","type","text","formControlName","name","name","name",1,"form-control"],["class","text-red-500 ml-3",4,"ngIf"],["pInputText","","type","text","formControlName","studentCode","name","student-code",1,"form-control"],["pInputText","","type","email","formControlName","email","name","email",1,"form-control"],["formControlName","password","promptLabel"," ","weakLabel","Y\u1ebfu","mediumLabel","Trung b\xecnh","strongLabel","M\u1ea1nh",1,"form-control",3,"inputStyle"],["pTemplate","footer"],["formControlName","faculty","placeholder","Ch\u1ecdn","name","faculty","optionLabel","name","emptyMessage","Kh\xf4ng c\xf3 d\u1eef li\u1ec7u",1,"form-control",3,"options","showClear"],[1,"col-12","mt-3"],["pButton","","label","\u0110\u0103ng k\xfd","type","submit",1,"btn-register",3,"disabled"],[1,"col-12","mt-1",3,"hidden"],["mode","indeterminate"],[1,"col-12",3,"hidden"],[3,"value","enableService","closable","valueChange"],["align","center",1,"col-12"],["routerLink","/auth/login","icon","pi pi-microsoft",1,"btn-register","font-bold"],[1,"flex","align-items-center","gap-2"],[1,"font-bold","text-4xl","ml-2"],[1,"text-red-500","ml-3"],[1,"mt-2","font-bold"],[1,"pl-2","ml-2","mt-0",2,"line-height","1.5"]],template:function(u,r){1&u&&(t.TgZ(0,"form",0),t.NdJ("ngSubmit",function(){return r.onRegister()}),t.TgZ(1,"p-panel",1),t.YNc(2,M,3,0,"ng-template",2),t.TgZ(3,"div",3)(4,"div",4)(5,"div",5),t._uU(6," H\u1ecd v\xe0 t\xean ("),t.TgZ(7,"span",6),t._uU(8,"*"),t.qZA(),t._uU(9,"): "),t.qZA(),t.TgZ(10,"div",4),t._UZ(11,"input",7),t.qZA(),t.YNc(12,S,2,0,"div",8),t.YNc(13,k,2,0,"div",8),t.qZA(),t.TgZ(14,"div",4)(15,"div",5),t._uU(16," M\xe3 s\u1ed1 sinh vi\xean ("),t.TgZ(17,"span",6),t._uU(18,"*"),t.qZA(),t._uU(19,"): "),t.qZA(),t.TgZ(20,"div",4),t._UZ(21,"input",9),t.qZA(),t.YNc(22,Y,2,0,"div",8),t.YNc(23,b,2,0,"div",8),t.qZA(),t.TgZ(24,"div",4)(25,"div",5),t._uU(26," Email ("),t.TgZ(27,"span",6),t._uU(28,"*"),t.qZA(),t._uU(29,") ("),t.TgZ(30,"span",6),t._uU(31,"@huce.edu.vn"),t.qZA(),t._uU(32,"): "),t.qZA(),t.TgZ(33,"div",4),t._UZ(34,"input",10),t.qZA(),t.YNc(35,L,2,0,"div",8),t.YNc(36,_,2,0,"div",8),t.qZA(),t.TgZ(37,"div",4)(38,"div",5),t._uU(39," M\u1eadt kh\u1ea9u ("),t.TgZ(40,"span",6),t._uU(41,"*"),t.qZA(),t._uU(42,"): "),t.qZA(),t.TgZ(43,"div",4)(44,"p-password",11),t.YNc(45,Q,2,0,"ng-template",2),t.YNc(46,w,12,0,"ng-template",12),t.qZA()(),t.YNc(47,O,2,0,"div",8),t.YNc(48,z,2,0,"div",8),t.qZA(),t.TgZ(49,"div",4)(50,"div",5),t._uU(51," Khoa tr\u1ef1c thu\u1ed9c ("),t.TgZ(52,"span",6),t._uU(53,"*"),t.qZA(),t._uU(54,"): "),t.qZA(),t.TgZ(55,"div",4),t._UZ(56,"p-dropdown",13),t.qZA(),t.YNc(57,P,2,0,"div",8),t.qZA(),t.TgZ(58,"div",14)(59,"div",4),t._UZ(60,"button",15),t.qZA(),t.TgZ(61,"div",16),t._UZ(62,"p-progressBar",17),t.qZA()(),t.TgZ(63,"div",18)(64,"div",4)(65,"p-messages",19),t.NdJ("valueChange",function(d){return r.registerMsg=d}),t.qZA()()(),t.TgZ(66,"div",20)(67,"div",4)(68,"span"),t._uU(69,"\u0110\xe3 c\xf3 t\xe0i kho\u1ea3n? "),t.TgZ(70,"a",21),t._uU(71,"\u0110\u0103ng nh\u1eadp ngay"),t.qZA()()()()()()()),2&u&&(t.Q6J("formGroup",r.registerForm),t.xp6(12),t.Q6J("ngIf",r.registerForm.controls.name.hasError("required")&&r.registerForm.controls.name.dirty),t.xp6(1),t.Q6J("ngIf",r.registerForm.controls.name.hasError("pattern")&&r.registerForm.controls.name.dirty),t.xp6(9),t.Q6J("ngIf",r.registerForm.controls.studentCode.hasError("required")&&r.registerForm.controls.studentCode.dirty),t.xp6(1),t.Q6J("ngIf",r.registerForm.controls.studentCode.hasError("pattern")&&r.registerForm.controls.studentCode.dirty),t.xp6(12),t.Q6J("ngIf",r.registerForm.controls.email.hasError("required")&&r.registerForm.controls.email.dirty),t.xp6(1),t.Q6J("ngIf",r.registerForm.controls.email.hasError("pattern")&&r.registerForm.controls.email.dirty),t.xp6(8),t.Akn(t.DdM(25,l)),t.Q6J("inputStyle",t.DdM(26,l)),t.xp6(3),t.Q6J("ngIf",r.registerForm.controls.password.hasError("required")&&r.registerForm.controls.password.dirty),t.xp6(1),t.Q6J("ngIf",r.registerForm.controls.password.hasError("pattern")&&r.registerForm.controls.password.dirty),t.xp6(8),t.Akn(t.DdM(27,l)),t.Q6J("options",r.faculties)("showClear",!0),t.xp6(1),t.Q6J("ngIf",r.registerForm.controls.faculty.hasError("required")&&r.registerForm.controls.faculty.touched),t.xp6(3),t.Q6J("disabled",!r.registerForm.valid||r.isSubmitted),t.xp6(1),t.Q6J("hidden",!r.isSubmitted),t.xp6(1),t.Akn(t.DdM(28,V)),t.xp6(1),t.Q6J("hidden",!r.registerNotify),t.xp6(2),t.Q6J("value",r.registerMsg)("enableService",!1)("closable",!1))},dependencies:[C.m,o._Y,o.Fj,o.JJ,o.JL,o.sg,o.u,D.V,I.s,N.jx,q.O5,x.o,R.Hq,J.rH,f.q,f.k,c.kW,c.Lt,p.x,p.i,h.gz,h.ro],styles:[".form-control[_ngcontent-%COMP%], .btn-register[_ngcontent-%COMP%]{width:100%}a[_ngcontent-%COMP%]{text-decoration:none}.col-12[_ngcontent-%COMP%]{margin-top:-10px}.panel[_ngcontent-%COMP%]{margin-top:2%}"]})}return e})()}}]);